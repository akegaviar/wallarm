.. _qs-setup-nginx-ru:

========================================
Установите динамический модуль для NGINX
========================================

Данная инструкция предполагает, что у вас `установлен NGINX официальной сборки <http://nginx.org/en/linux_packages.html>`__.

Если вы используете специальную сборку NGINX, обратитесь к разделу TTK [Установка динамически подключаемого модуля для NGINX](../advanced-installation-and-setup/installation-more-options/dynamic-module-for-nginx.md)

Для установки динамического модуля для NGINX вам потребуется выполнить
следующие действия:

#. Добавить репозитории Wallarm, из которых вы загрузите пакеты.
#. Установить пакеты Wallarm.
#. Установить лицензионный ключ.
#. Настроить модуль постаналитики.
#. Подключить модуль NGINX-Wallarm.
#. Подключить фильтрующий узел к облаку Wallarm.

Добавьте репозитории Wallarm
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Установка и обновление NGINX-модуля происходит из репозиториев Wallarm.

В зависимости от вашей операционной системы, выполните одну из следующих команд:

.. include:: /ru/include-ru/add-repo-ru.rst

.. include:: /ru/include-ru/access-repo-ru.rst

Установите пакеты Wallarm
~~~~~~~~~~~~~~~~~~~~~~~~~

Чтобы выполнять первичную обработку запросов и постаналитику на одном сервере,
необходимо установить следующие пакеты:

* модуль NGINX
* модуль постаналитики

Чтобы установить модуль NGINX и модуль постаналитики на один сервер, выполните
команду:

.. include:: /ru/include-ru/install-nginx-postanalytics-ru.rst

Чтобы установить только модуль NGINX, выполните команду:

.. include:: /ru/include-ru/install-nginx-ru.rst

Установите лицензионный ключ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /ru/include-ru/install-license-ru.rst

Настройте модуль постаналитики
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /ru/include-ru/configure-postanalytics-ru.rst

Подключите модуль NGINX-Wallarm
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

#. Добавьте в файл ``/etc/nginx/nginx.conf`` следующую директиву:

 .. code-block:: ini

    load_module modules/ngx_http_wallarm_module.so;

#. Скопируйте конфигурационные файлы для настройки системы:

 .. code-block:: command

    cp /usr/share/doc/nginx-module-wallarm/examples/*.conf /etc/nginx/conf.d/

Подключите фильтрующий узел к облаку Wallarm
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /ru/include-ru/connect-cloud-ru.rst

На этом установка завершена. Далее необходимо настроить узел для фильтрации
трафика ТТК.